# Web Servers and Infrastructure

## Types of Servers

### Chat Server
A server dedicated to handling chat communication between users in real-time.

### Web Server
Responsible for serving web content, primarily HTML, CSS, JavaScript, and images. Examples include Apache, Nginx, and Microsoft IIS.

### Application Server
Hosts and runs applications, typically providing dynamic content and backend functionality. Examples include Apache Tomcat, Node.js, and Gunicorn.

### Database (DB) Server
Stores and manages data for applications. Examples include MySQL, PostgreSQL, and MongoDB.

### Email Server
Handles email sending, receiving, and storage. Examples include Microsoft Exchange, Postfix, and Sendmail.

### Backup Server
Dedicated to creating and storing backups of data from other servers or workstations.

## How Servers Work

Servers operate by listening to requests on specific ports. A program running on the server listens for incoming requests and processes them. Any system can be a server if it runs the appropriate software.

### Web Server

- **Role**: Serve web content to clients (e.g., browsers).
- **Example**: Apache, Nginx.

### Application Server

- **Role**: Provide backend functionality and dynamic content generation (e.g., e-commerce backend).
- **Example**: Apache Tomcat, Node.js.

### Database Server

- **Role**: Store, manage, and provide access to data.
- **Example**: MySQL, PostgreSQL.

## Application Types

- **Desktop**: Standalone applications (e.g., Calculator).
- **Mobile**: Apps running on mobile devices.
- **Web Servers**: Applications running on web servers.
- **Analytics**: Applications for data analysis.
- **Problem Solving**: Applications designed to solve specific problems.

## Standalone vs Client-Server

- **Standalone**: Self-contained applications running on a single machine (e.g., Calculator).
- **Client-Server**: Applications where the client requests services from a server (e.g., Slack).

## Web Frameworks

### Backend Frameworks
- **Role**: Server-side code management.
- **Examples**: Django, Flask (Python), Express.js (Node.js).

### Frontend Frameworks
- **Role**: Client-side code management.
- **Examples**: React, Angular, Vue.js.

### Example

**Backend Framework (Flask):**
```python
from flask import Flask

app = Flask(__name__)

@app.route('/')
def hello():
    return 'Hello World!'

if __name__ == '__main__':
    app.run()
```

**Frontend Framework (React):**
```jsx
import React from 'react';
import ReactDOM from 'react-dom';

const App = () => {
  return <h1>Hello, World!</h1>;
};

ReactDOM.render(<App />, document.getElementById('root'));
```

## Static vs Dynamic Websites

### Static Websites
- **Content**: HTML and CSS.
- **Server**: Nginx.
- **Role**: Serve static files.
- **Example**: Personal portfolio.

### Dynamic Websites
- **Content**: Combination of static and dynamic content.
- **Server**: Apache Tomcat, Gunicorn.
- **Role**: Serve dynamic content generated by server-side applications.
- **Example**: E-commerce site.

## Apache Web Server

### Installation

1. Install Apache:
    ```sh
    yum install httpd
    ```

2. Start Apache:
    ```sh
    systemctl start httpd
    ```

3. Enable Apache to start on boot:
    ```sh
    systemctl enable httpd
    ```

4. Check the status:
    ```sh
    systemctl status httpd
    ```

5. Configure firewall to allow HTTP traffic:
    ```sh
    firewall-cmd --permanent --add-service=http
    ```

### Viewing Logs

- Access log:
    ```sh
    cat /var/log/httpd/access_log
    ```

- Error log:
    ```sh
    cat /var/log/httpd/error_log
    ```

### Configuration File

- Main configuration file: `/etc/httpd/conf/httpd.conf`
    ```apache
    Listen 80
    DocumentRoot "/var/www/html"
    ServerName www.houses.com:80
    ```

### Configuring DNS

- **DNS Name | IP Address**
  ```
  www.houses.com | 192.168.1.10
  www.oranges.com | 192.168.1.10
  ```

- Add to `/etc/hosts` for local resolution:
    ```
    192.168.1.10 www.houses.com
    192.168.1.10 www.oranges.com
    ```

### Virtual Hosts

Configure multiple websites on a single Apache server:

- Add virtual hosts to `/etc/httpd/conf/httpd.conf`:
    ```apache
    <VirtualHost *:80>
      ServerName www.houses.com
      DocumentRoot /var/www/houses
    </VirtualHost>

    <VirtualHost *:80>
      ServerName www.oranges.com
      DocumentRoot /var/www/oranges
    </VirtualHost>
    ```

- Include separate configuration files:
    ```apache
    ServerName www.houses.com:80

    Include conf/houses.conf
    Include conf/oranges.conf
    ```

### Restart Apache

Any changes to configuration files require a restart:
```sh
systemctl restart httpd
```

## Installing Apache Tomcat

1. Install Java:
    ```sh
    yum install java-1.8.0-openjdk-devel
    ```

2. Download and extract Apache Tomcat:
    ```sh
    wget https://downloads.apache.org/tomcat/tomcat-8/v8.5.53/bin/apache-tomcat-8.5.53.tar.gz
    tar -zxvf apache-tomcat-8.5.53.tar.gz
    ```

3. Start Apache Tomcat:
    ```sh
    ./apache-tomcat-8.5.53/bin/startup.sh
    ```

### Apache Tomcat Directory Structure

- `bin`: Contains startup and shutdown scripts.
- `conf`: Configuration files.
- `lib`: Libraries.
- `logs`: Log files.
- `temp`: Temporary files.
- `webapps`: Deployed web applications.
- `work`: Working directory for web applications.

### Deploying Applications

- Package the application:
    ```sh
    jar -cvf app.war *
    ```

- Or use Maven or Gradle:
    ```sh
    mvn package
    ```

    ```sh
    gradle build
    ```

- Move the WAR file to the `webapps` directory of Tomcat.

## Python Web Frameworks

### Project Structure

- `my-application/`
  - `LICENSE`
  - `README.md`
  - `requirements.txt`
  - `main.py`
  - `utils/`
  - `tests/`
  - `config/`
  - `routes/`
  - `services/`
  - `db/`
  - `core/`

### Production Deployment

- Use production-grade WSGI servers:
  - **Gunicorn**:
    ```sh
    gunicorn main:app -w 2
    ```

## ExpressJS

### Project Structure

- `my-application/`
  - `LICENSE`
  - `README.md`
  - `package.json`
  - `app.js`
  - `public/`
  - `tests/`
  - `config/`
  - `routes/`
  - `services/`
  - `db/`
  - `core/`

### Installing and Running

1. Install dependencies:
    ```sh
    npm install
    ```

2. Start the application:
    ```sh
    node app.js
    ```

3. Run in development mode:
    ```sh
    npm run start:dev
    ```

### Production Process Managers

- **supervisord**
- **forever**
- **pm2**:
    ```sh
    pm2 start app.js
    ```

    ```sh
    pm2 start app.js -i 4
    ```

## IPs and Ports

### IP Address

- **Interfaces**:
  - **Ethernet (enp0s3)**:
    ```sh
    ip addr show
    10.0.2.15/24
    ```

  - **Wireless (wlp0s2)**:
    ```sh
    ip addr show
    10.0.2.16/24
    ```

### Ports

- Up to 65535 ports per IP address.
- Example Flask application:
    ```python
    from flask import Flask

    app = Flask(__name__)

    @app.route('/')
    def hello():
        return 'Hello World!'

    if __name__ == '__main__':
        app.run(port=8000, host='0.0.0.0')
    ```

- If no host specified, listens on loopback interface:
    ```python
    from flask import Flask

    app = Flask(__name__)

    @app.route('/')
    def hello():
        return 'Hello World!'

    if __name__ == '__main__':
        app.run(port=8000, host='127.0.0.1')
    ```

By following these guidelines, you can effectively manage various types of servers and deploy applications on different infrastructures.